# InternationalChess - 控制台国际象棋程序 README

## 项目概述

这是一个用 C++ 实现的**纯控制台国际象棋游戏程序**，支持完整的棋盘显示、棋子移动、走法合法性判断、悔棋、历史记录查看、批量走棋等功能。程序完全跨平台，已在 macOS 和 Windows 上测试通过。

- 白方棋子用**大写字母开头**（如 `Pawn`, `Rook`）
- 黑方棋子用**小写字母开头**（如 `pawn`, `rook`）
- 白方先手

## 主要功能

1. 显示当前棋盘
2. 单步移动棋子（带完整规则判断）
3. 查询任意位置的棋子信息
4. 批量输入多步走法（支持中途悔棋）
5. 查看完整历史走法记录（链表存储）
6. 悔棋（支持连续多次悔棋，直至回到初始局面）
7. 防止同一方连续走棋（强制轮流）

## 程序设计思路

### 核心数据结构

- `chessMap`：`vector<vector<string>>` 8×8 网格，存储棋子类型字符串（如 `"Pawn"`, `"rook"`, `""` 表示空）
- `chessColorMap`：`int[8][8]` 数组，快速判断位置颜色  
  - `1` = 白方  
  - `-1` = 黑方  
  - `0` = 空位

### 坐标系统

- 用户输入：标准象棋记谱法（如 `e2`, `e4`）
- 内部索引：行（0~7，从上到下，第8排为黑方），列（0~7，从 a 到 h）
- 转换函数：`transferPoint()` 和 `transferPoint2()` 将用户输入转为内部 0~7 索引

### 移动记录与悔棋（核心亮点）

使用**单向链表** `ProcessRecordNode` 记录每一步完整信息：

- 起点、终点
- 移动的棋子类型和颜色
- 是否吃子 + 被吃棋子的类型和颜色
- 步数

优势：
- 悔棋时可精确恢复棋盘状态（包括复活被吃的棋子）
- 支持任意次数悔棋
- 历史记录显示清晰

### 移动合法性判断（logic.cpp）

- 每种棋子分别判断移动规则（兵、车、马、象、后、王）
- 路径检查（车、象、后是否被阻挡）
- 兵的特殊规则（首次两步、前进、吃子斜走）
- 禁止吃己方棋子
- 轮流机制（通过 `excPosit()` 防止同色连走）

## 文件结构与作用说明

| 文件名              | 作用说明 |
|---------------------|----------|
| **main.cpp**        | 程序入口，主菜单循环，处理用户选择，调用各模块功能 |
| **logic.cpp / logic.h** | 核心逻辑：移动合法性判断、`moveChess()`、`regret()` 悔棋、`excPosit()` 轮流检查 |
| **search.cpp / search.h** | 棋盘状态查询、坐标转换、**移动历史链表** 的创建、添加、删除、输出 |
| **display.cpp / display.h** | 棋盘美观打印、批量走棋输入处理、简易历史记录（仅位置，非完整） |
| **CMakeLists.txt**  | 跨平台构建配置文件，支持 macOS 原生、Windows（MinGW）静态编译 |
| **build(buildOnWin).bat** | Windows 下快速构建脚本（使用 MinGW Makefiles） |
| **mingw-w64-toolchain.cmake** | macOS/Linux 上交叉编译 Windows 可执行文件的工具链配置 |
| **README-Windows.md** | Windows 用户使用说明 |
| **构建流程.md**     | macOS 上使用 Homebrew + MinGW-w64 交叉编译 Windows 版的步骤 |

## 编译与运行

### macOS / Linux（原生编译）

```bash
mkdir build && cd build
cmake ..
make
./bin/chess

